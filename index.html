<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* MASTER CSS - Ensure this matches the CSS provided previously */
        :root { --bg-body: #05050f; --bg-card: #0f1016; --bg-input: #08080c; --border-color: #1e1e2d; --primary-gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); --text-main: #ffffff; --text-muted: #94a3b8; --success: #10b981; --danger: #ef4444; --font-family: 'Inter', sans-serif; }
        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        body { font-family: var(--font-family); background-color: var(--bg-body); color: var(--text-main); background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px); background-size: 40px 40px; min-height: 100vh; display: flex; }
        .sidebar { width: 260px; background: var(--bg-body); border-right: 1px solid var(--border-color); display: flex; flex-direction: column; position: fixed; height: 100vh; z-index: 100; transition: transform 0.3s ease; transform: translateX(0); }
        .sidebar-header { padding: 30px 25px; display: flex; align-items: center; gap: 12px; }
        .sidebar-header i { font-size: 1.5rem; color: #fff; }
        .brand-text { font-size: 1.2rem; font-weight: 700; letter-spacing: 0.5px; }
        .brand-text span { color: #8b5cf6; }
        .sidebar-nav { padding: 0 15px; display: flex; flex-direction: column; gap: 8px; }
        .sidebar-link { display: flex; align-items: center; gap: 12px; padding: 12px 20px; color: var(--text-muted); text-decoration: none; font-weight: 500; border-radius: 12px; transition: all 0.3s ease; }
        .sidebar-link:hover { color: #fff; background: rgba(255,255,255,0.05); }
        .sidebar-link.active { background: rgba(99, 102, 241, 0.15); color: #8b5cf6; border: 1px solid rgba(139, 92, 246, 0.2); }
        .sidebar-link.active i { color: #8b5cf6; }
        .main-content { flex: 1; margin-left: 260px; padding: 40px; max-width: 1600px; }
        .page-header { margin-bottom: 40px; }
        .page-title { font-size: 2rem; font-weight: 700; margin-bottom: 10px; }
        .page-subtitle { color: var(--text-muted); font-size: 0.95rem; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 25px; margin-bottom: 40px; }
        .stat-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 16px; padding: 25px; display: flex; flex-direction: column; justify-content: space-between; height: 140px; }
        .stat-header { display: flex; justify-content: space-between; color: var(--text-muted); font-size: 0.85rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }
        .stat-value { font-size: 2.5rem; font-weight: 700; color: #fff; margin-top: 10px; }
        .stat-icon { font-size: 1.5rem; opacity: 0.5; }
        .user-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 25px; }
        .card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 20px; padding: 30px; margin-bottom: 25px; box-shadow: 0 4px 20px rgba(0,0,0,0.2); }
        .mobile-toggle { display: none; position: fixed; top: 20px; right: 20px; z-index: 200; background: var(--bg-card); border: 1px solid var(--border-color); padding: 10px; border-radius: 8px; color: white; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 90; display: none; backdrop-filter: blur(2px); }
        .overlay.open { display: block; }
        @media (max-width: 1024px) {
          .sidebar { transform: translateX(-100%); }
          .sidebar.open { transform: translateX(0); }
          .main-content { margin-left: 0; padding: 20px; }
          .mobile-toggle { display: block; }
        }
    </style>
</head>
<body>
    <button class="mobile-toggle" id="sidebarToggle"><i class="fas fa-bars"></i></button>
    
    <div class="overlay" id="overlay"></div>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-layer-group"></i>
            <div class="brand-text">ZENX <span>ADMIN</span></div>
        </div>
        <nav class="sidebar-nav">
            <a href="index.html" class="sidebar-link active"><i class="fas fa-chart-pie"></i> Overview</a>
            <a href="admin.html" class="sidebar-link"><i class="fas fa-user-plus"></i> Add User</a>
            <a href="dashboard.html" class="sidebar-link"><i class="fas fa-users-cog"></i> Manage Users</a>
            <a href="staff_management.html" class="sidebar-link"><i class="fas fa-user-shield"></i> Manage Staff</a>
            <a href="settings.html" class="sidebar-link"><i class="fas fa-cog"></i> Settings</a>
        </nav>
    </aside>

    <main class="main-content">
        <div class="page-header">
            <h1 class="page-title">Dashboard</h1>
            <p class="page-subtitle">Welcome back. MD ARSAD.</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">Total Users <i class="fas fa-users stat-icon"></i></div>
                <div class="stat-value" id="totalUsers">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-header">Active Now <i class="fas fa-user-check stat-icon" style="color: var(--success)"></i></div>
                <div class="stat-value" id="activeUsers">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-header">Inactive <i class="fas fa-user-slash stat-icon" style="color: var(--danger)"></i></div>
                <div class="stat-value" id="inactiveUsers">0</div>
            </div>
             <div class="stat-card">
                <div class="stat-header">Total Staff <i class="fas fa-shield-alt stat-icon"></i></div>
                <div class="stat-value" id="totalStaff">0</div>
            </div>
        </div>

        <h2 style="font-size: 1.1rem; margin-bottom: 20px;">Quick Actions</h2>
        <div class="user-grid">
            <a href="admin.html" class="card" style="text-decoration: none; border: 1px solid #6366f1; background: rgba(99, 102, 241, 0.05); display: flex; align-items: center; justify-content: space-between;">
                <div>
                    <h3 style="color: white; margin-bottom: 5px;">Create New User</h3>
                    <p style="color: var(--text-muted); font-size: 0.9rem;">Generate access for a client</p>
                </div>
                <div style="background: rgba(99, 102, 241, 0.2); width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 8px; color: #8b5cf6;">
                    <i class="fas fa-plus"></i>
                </div>
            </a>
            
             <a href="dashboard.html" class="card" style="text-decoration: none; display: flex; align-items: center; justify-content: space-between;">
                <div>
                    <h3 style="color: white; margin-bottom: 5px;">Manage Database</h3>
                    <p style="color: var(--text-muted); font-size: 0.9rem;">Edit, Search or Delete users</p>
                </div>
                 <div style="background: rgba(255, 255, 255, 0.05); width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 8px; color: white;">
                    <i class="fas fa-search"></i>
                </div>
            </a>
        </div>
        
        <div id="userList" style="display:none"></div>
    </main>

    <script type="module">
        import { db } from "./firebase-config.js";
        import { ref, onValue } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-database.js";

        // Sidebar Logic - FIXED
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const sidebarToggle = document.getElementById('sidebarToggle');
        
        const toggleSidebar = () => {
            sidebar.classList.toggle('open');
            overlay.classList.toggle('open');
        };
        
        if(sidebarToggle) sidebarToggle.addEventListener('click', toggleSidebar);
        if(overlay) overlay.addEventListener('click', toggleSidebar);

        // Data Logic
        onValue(ref(db, 'userinfo/'), (snapshot) => {
            const data = snapshot.val() || {};
            const users = Object.values(data);
            document.getElementById('totalUsers').textContent = users.length;
            document.getElementById('activeUsers').textContent = users.filter(u => u.status === 'active').length;
            document.getElementById('inactiveUsers').textContent = users.filter(u => u.status !== 'active').length;
        });
        onValue(ref(db, 'staffdata/'), (snapshot) => {
            document.getElementById('totalStaff').textContent = Object.keys(snapshot.val() || {}).length;
        });
    </script>
</body>
</html>